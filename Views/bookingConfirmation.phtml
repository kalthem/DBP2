<?php
if (session_status() !== PHP_SESSION_ACTIVE) session_start();
$baseUrl = 'http://20.126.5.244/~u202103011/BorrowMyCharger';
include __DIR__ . '/template/header.phtml';

// Make sure booking details exist
$booking = $_SESSION['booking_confirmation'] ?? null;
if (!$booking) {
    echo '<div class="alert alert-danger mt-4">Booking details not found.</div>';
    include __DIR__ . '/template/footer.phtml';
    exit;
}
?>

<link rel="stylesheet" href="<?= $baseUrl ?>/css/booking.css">

<div class="container mt-5 mb-5">
    <div class="card shadow-sm p-4">
        <h2 class="mb-4 text-success">
            <i class="bi bi-check-circle-fill"></i> Booking Confirmed!
        </h2>

        <p class="lead">Thank you for your booking. A confirmation message has been sent to the homeowner.</p>

        <div class="mb-4">
            <h5>Booking Summary:</h5>
            <ul class="list-group">
                <li class="list-group-item"><strong>Charge Point ID:</strong> <?= htmlspecialchars($booking['charge_point_id']) ?></li>
                <li class="list-group-item"><strong>Start Time:</strong> <?= htmlspecialchars($booking['start_time']) ?></li>
                <li class="list-group-item"><strong>End Time:</strong> <?= htmlspecialchars($booking['end_time']) ?></li>
                <li class="list-group-item"><strong>Your Message:</strong> <?= nl2br(htmlspecialchars($booking['message'])) ?></li>
            </ul>
        </div>

        <div class="d-flex justify-content-between">
            <a href="<?= $baseUrl ?>/index.php?action=dashboard" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left"></i> Back to Dashboard
            </a>
            <a href="<?= $baseUrl ?>/index.php?action=mybookings" class="btn btn-primary">
                <i class="bi bi-list-check"></i> View My Bookings
            </a>
        </div>
    </div>
</div>

<?php include __DIR__ . '/template/footer.phtml'; ?>
